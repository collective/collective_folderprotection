*** Settings ***

Library  Selenium2Library  timeout=5 seconds  implicit_wait=0.5 seconds
Resource  keywords.txt
Variables  plone/app/testing/interfaces.py

Suite Setup  Start browser
Suite Teardown  Close All Browsers

*** Variables ***

${BROWSER} =  firefox

*** Test Cases ***


Manager should be allowed to access protected folder
    Goto Homepage
    Log In As Site Owner
    Create Protected Folder  Protected
    Log In As Manager User
    Go to   ${protected_folder_url}
    Page Should Not Contain  This resource is password protected

Manager should be able to access the 'Assign password' view
    Goto Homepage
    Log In As Site Owner
    Create Protected Folder  Protected
    Log In As Manager User
    Go to   ${protected_folder_url}
    Page Should Contain  Assign password
    Click Link  link=Assign password
    Page Should Contain  Choose a password to protect this object and, if it is a folder, its children.

Manager should not see the 'Assign password' view for a non protected folder
    Goto Homepage
    Log In As Site Owner
    Create Not Protected Folder  Not-Protected
    Go to   ${not_protected_folder_url}
    Page Should Not Contain  Assign password
    Log In As Manager User
    Go to   ${not_protected_folder_url}
    Page Should Not Contain  Assign password

Manager should not be able to remove protected folder
    Goto Homepage
    Log In As Site Owner
    Create Protected Folder  Protected
    Go to   ${protected_folder_url}
    Remove Content
    Go to   ${protected_folder_url}
    Page Should Not Contain  This page does not seem to exist
    Log In As Manager User
    Go to   ${protected_folder_url}
    Remove Content
    Go to   ${protected_folder_url}
    Page Should Not Contain  This page does not seem to exist
    
Manager should be able to remove not protected folder
    Goto Homepage
    Log In As Site Owner
    Create Not Protected Folder  Not-Protected
    Go to   ${not_protected_folder_url}
    Remove Content
    Go to   ${not_protected_folder_url}
    Page Should Contain  This page does not seem to exist
    Goto Homepage
    Create Not Protected Folder  Not-Protected
    Log In As Manager User
    Go to   ${not_protected_folder_url}
    Remove Content
    Go to   ${not_protected_folder_url}
    Page Should Contain  This page does not seem to exist